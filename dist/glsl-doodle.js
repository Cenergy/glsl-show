!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Doodle=t():e.Doodle=t()}(window,function(){return function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(!y[e]||!x[e])return;for(var n in x[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(h[n]=t[n]);0==--m&&0===g&&F()}(e,n),t&&t(e,n)};var n,r=!0,o="4ab74e4d9fb8783361c4",a=1e4,i={},c=[],s=[];function u(e){var t=k[e];if(!t)return T;var r=function(r){return t.hot.active?(k[r]?-1===k[r].parents.indexOf(e)&&k[r].parents.push(e):(c=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),c=[]),T(r)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return T[e]},set:function(t){T[e]=t}}};for(var a in T)Object.prototype.hasOwnProperty.call(T,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(r,a,o(a));return r.e=function(e){return"ready"===l&&v("prepare"),g++,T.e(e).then(t,function(e){throw t(),e});function t(){g--,"prepare"===l&&(_[e]||D(e),0===g&&0===m&&F())}},r.t=function(e,t){return 1&t&&(e=r(e)),T.t(e,-2&t)},r}function d(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:E,apply:A,status:function(e){if(!e)return l;f.push(e)},addStatusHandler:function(e){f.push(e)},removeStatusHandler:function(e){var t=f.indexOf(e);t>=0&&f.splice(t,1)},data:i[e]};return n=void 0,t}var f=[],l="idle";function v(e){l=e;for(var t=0;t<f.length;t++)f[t].call(null,e)}var p,h,b,m=0,g=0,_={},x={},y={};function w(e){return+e+""===e?+e:e}function E(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return r=e,v("check"),(t=a,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,a=T.p+""+o+".hot-update.json";r.open("GET",a,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}})).then(function(e){if(!e)return v("idle"),null;x={},_={},y=e.c,b=e.h,v("prepare");var t=new Promise(function(e,t){p={resolve:e,reject:t}});h={};return D(0),"prepare"===l&&0===g&&0===m&&F(),t});var t}function D(e){y[e]?(x[e]=!0,m++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=T.p+""+e+"."+o+".hot-update.js",document.head.appendChild(t)}(e)):_[e]=!0}function F(){v("ready");var e=p;if(p=null,e)if(r)Promise.resolve().then(function(){return A(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&t.push(w(n));e.resolve(t)}}function A(t){if("ready"!==l)throw new Error("apply() is only allowed in ready status");var n,r,a,s,u;function d(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var o=r.pop(),a=o.id,i=o.chain;if((s=k[a])&&!s.hot._selfAccepted){if(s.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:a};if(s.hot._main)return{type:"unaccepted",chain:i,moduleId:a};for(var c=0;c<s.parents.length;c++){var u=s.parents[c],d=k[u];if(d){if(d.hot._declinedDependencies[a])return{type:"declined",chain:i.concat([u]),moduleId:a,parentId:u};-1===t.indexOf(u)&&(d.hot._acceptedDependencies[a]?(n[u]||(n[u]=[]),f(n[u],[a])):(delete n[u],t.push(u),r.push({chain:i.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},m=[],g={},_=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var x in h)if(Object.prototype.hasOwnProperty.call(h,x)){var E;u=w(x);var D=!1,F=!1,A=!1,S="";switch((E=h[x]?d(u):{type:"disposed",moduleId:x}).chain&&(S="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(D=new Error("Aborted because of self decline: "+E.moduleId+S));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(D=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+S));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(D=new Error("Aborted because "+u+" is not accepted"+S));break;case"accepted":t.onAccepted&&t.onAccepted(E),F=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),A=!0;break;default:throw new Error("Unexception type "+E.type)}if(D)return v("abort"),Promise.reject(D);if(F)for(u in g[u]=h[u],f(m,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,u)&&(p[u]||(p[u]=[]),f(p[u],E.outdatedDependencies[u]));A&&(f(m,[E.moduleId]),g[u]=_)}var U,O=[];for(r=0;r<m.length;r++)u=m[r],k[u]&&k[u].hot._selfAccepted&&O.push({module:u,errorHandler:k[u].hot._selfAccepted});v("dispose"),Object.keys(y).forEach(function(e){!1===y[e]&&function(e){delete installedChunks[e]}(e)});for(var P,R,L=m.slice();L.length>0;)if(u=L.pop(),s=k[u]){var I={},B=s.hot._disposeHandlers;for(a=0;a<B.length;a++)(n=B[a])(I);for(i[u]=I,s.hot.active=!1,delete k[u],delete p[u],a=0;a<s.children.length;a++){var C=k[s.children[a]];C&&((U=C.parents.indexOf(u))>=0&&C.parents.splice(U,1))}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(s=k[u]))for(R=p[u],a=0;a<R.length;a++)P=R[a],(U=s.children.indexOf(P))>=0&&s.children.splice(U,1);for(u in v("apply"),o=b,g)Object.prototype.hasOwnProperty.call(g,u)&&(e[u]=g[u]);var j=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(s=k[u])){R=p[u];var N=[];for(r=0;r<R.length;r++)if(P=R[r],n=s.hot._acceptedDependencies[P]){if(-1!==N.indexOf(n))continue;N.push(n)}for(r=0;r<N.length;r++){n=N[r];try{n(R)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:R[r],error:e}),t.ignoreErrored||j||(j=e)}}}for(r=0;r<O.length;r++){var M=O[r];u=M.module,c=[u];try{T(u)}catch(e){if("function"==typeof M.errorHandler)try{M.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,originalError:e}),t.ignoreErrored||j||(j=n),j||(j=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||j||(j=e)}}return j?(v("fail"),Promise.reject(j)):(v("idle"),new Promise(function(e){e(m)}))}var k={};function T(t){if(k[t])return k[t].exports;var n=k[t]={i:t,l:!1,exports:{},hot:d(t),parents:(s=c,c=[],s),children:[]};return e[t].call(n.exports,n,n.exports,u(t)),n.l=!0,n.exports}return T.m=e,T.c=k,T.d=function(e,t,n){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},T.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(1&t&&(e=T(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(T.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)T.d(n,r,function(t){return e[t]}.bind(null,r));return n},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="/js/",T.h=function(){return o},u(22)(T.s=22)}([function(e,t,n){e.exports=n(26)},function(e,t,n){var r=n(23),o=n(24),a=n(25);e.exports=function(e,t){return r(e)||o(e,t)||a()}},function(e,t){function n(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(o,a){var i=e.apply(t,r);function c(e){n(i,o,a,c,s,"next",e)}function s(e){n(i,o,a,c,s,"throw",e)}c(void 0)})}}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){n(3);var r=n(29);function o(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,n){var o=r(e,t);if(o){var a=Object.getOwnPropertyDescriptor(o,t);return a.get?a.get.call(n):a.value}},o(t,n,a||t)}e.exports=o},function(e,t){e.exports="#ifdef GL_ES\nprecision mediump float;\n#endif\nvoid main() {\n\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.1);\n}\n"},function(e,t,n){var r=n(27),o=n(28);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},function(e,t,n){var r=n(30);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(31),o=n(32),a=n(33);e.exports=function(e){return r(e)||o(e)||a()}},function(e,t){e.exports="attribute vec3 a_vertexPosition;\nvoid main() {\n\tgl_PointSize = 1.0;\n\tgl_Position = vec4(a_vertexPosition, 1);\n}\n"},function(e,t){e.exports="attribute vec4 a_vertexPosition;\nattribute vec2 a_vertexTextureCoord;\nvarying vec2 vTextureCoord;\nvoid main() {\n\tgl_PointSize = 1.0;\n\tgl_Position = a_vertexPosition;\n\tvTextureCoord = a_vertexTextureCoord;\n}\n"},function(e,t){e.exports="#ifndef M_STDLIB\n#define M_STDLIB\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n#ifndef FLT_EPSILON\n#define FLT_EPSILON 0.000001\n#endif\nfloat atan2(float dy, float dx) {\n\tfloat ax = abs(dx);\n\tfloat ay = abs(dy);\n\tfloat a = min(ax, ay) / (max(ax, ay) + FLT_EPSILON);\n\tfloat s = a * a;\n\tfloat r = ((((((-0.0464964749 * s) + 0.15931422) * s) - 0.327622764) * s) * a) + a;\n\tif (ay > ax)\n\t\tr = 1.57079637 - r;\n\tif (dx < 0.0)\n\t\tr = PI - r;\n\tif (dy < 0.0)\n\t\tr = -r;\n\treturn r;\n}\nfloat atan2(vec2 v) {\n\treturn atan2(v.y, v.x);\n}\nfloat angle(vec2 v1, vec2 v2) {\n\tfloat ang = atan2(v1) - atan2(v2);\n\tif (ang < 0.0)\n\t\tang += (2.0 * PI);\n\treturn ang;\n}\nfloat angle(vec2 v) {\n\treturn angle(v, vec2(1.0, 0.0));\n}\nvec2 center(vec2 v) {\n\treturn v * 0.5;\n}\nvec2 center(vec2 v1, vec2 v2) {\n\treturn (v1 + v2) * 0.5;\n}\nhighp float random(vec2 co) {\n\thighp float a = 12.9898;\n\thighp float b = 78.233;\n\thighp float c = 43758.5453;\n\thighp float dt = dot(co.xy, vec2(a, b));\n\thighp float sn = mod(dt, 3.14);\n\treturn fract(sin(sn) * c);\n}\nhighp float random(vec2 st, float a, float b) {\n\thighp float p = random(st);\n\treturn mix(a, b, p);\n}\nhighp vec2 random2(vec2 st) {\n\thighp vec2 v = vec2(dot(st, vec2(127.1, 311.7)), dot(st, vec2(269.5, 183.3)));\n\treturn -1.0 + (2.0 * fract(sin(v) * 43758.5453123));\n}\nhighp vec3 random3(vec2 st) {\n\thighp vec3 v = vec3(random2(st), random(st));\n\treturn v;\n}\nhighp float noise(vec2 st) {\n\tvec2 i = floor(st);\n\tvec2 f = fract(st);\n\tvec2 u = (f * f) * (3.0 - (2.0 * f));\n\treturn mix(mix(random(i + vec2(0.0, 0.0)), random(i + vec2(1.0, 0.0)), u.x), mix(random(i + vec2(0.0, 1.0)), random(i + vec2(1.0, 1.0)), u.x), u.y);\n}\nhighp float noise(vec3 p) {\n\tvec3 i = floor(p);\n\tvec4 a = dot(i, vec3(1.0, 57.0, 21.0)) + vec4(0.0, 57.0, 21.0, 78.0);\n\tvec3 f = (cos((p - i) * acos(-1.0)) * -0.5) + 0.5;\n\ta = mix(sin(cos(a) * a), sin(cos(1.0 + a) * (1.0 + a)), f.x);\n\ta.xy = mix(a.xz, a.yw, f.y);\n\treturn mix(a.x, a.y, f.z);\n}\nvec2 polar(vec2 st, vec2 c) {\n\tvec2 p = c - st;\n\tfloat r = length(p) * 2.0;\n\tfloat a = atan(p.y, p.x);\n\treturn vec2(r, a);\n}\nvec2 polar(vec2 st) {\n\treturn polar(st, vec2(0.5));\n}\n#endif\n"},function(e,t){e.exports="#ifndef MOD_SHAPES\n#define MOD_SHAPES\nUDF shape_blade(vec2 st, vec2 center, float num) {\n\tvec2 pt = polar(st, vec2(center));\n\tfloat x = pt.x;\n\tfloat y = cos(pt.y * num);\n\treturn smoothstep(x - 0.01, x + 0.01, y);\n}\nUDF shape_blade3(vec2 st, vec2 center) {\n\treturn shape_blade(st, center, 3.0);\n}\nUDF shape_blade3(vec2 st) {\n\treturn shape_blade(st, vec2(0.5), 3.0);\n}\nUDF shape_blade4(vec2 st, vec2 center) {\n\treturn shape_blade(st, center, 4.0);\n}\nUDF shape_blade4(vec2 st) {\n\treturn shape_blade(st, vec2(0.5), 4.0);\n}\nUDF shape_blade5(vec2 st, vec2 center) {\n\treturn shape_blade(st, center, 5.0);\n}\nUDF shape_blade5(vec2 st) {\n\treturn shape_blade(st, vec2(0.5), 5.0);\n}\nUDF shape_infinity(vec2 st, vec2 center) {\n\treturn shape_blade(st, center, 2.0);\n}\nUDF shape_infinity(vec2 st) {\n\treturn shape_blade(st, vec2(0.5), 2.0);\n}\nUDF shape_clover(vec2 st, vec2 center, float num) {\n\tvec2 pt = polar(st, vec2(center));\n\tfloat x = pt.x;\n\tfloat y = abs(cos((pt.y * num) * 0.5));\n\treturn smoothstep(x - 0.01, x + 0.01, y);\n}\nUDF shape_bean(vec2 st, vec2 center) {\n\treturn shape_clover(st, center, 1.0);\n}\nUDF shape_bean(vec2 st) {\n\treturn shape_clover(st, vec2(0.5), 1.0);\n}\nUDF shape_apple(vec2 st, vec2 center) {\n\treturn shape_clover(vec2(st.y - 0.2, st.x), center, 1.3);\n}\nUDF shape_apple(vec2 st) {\n\treturn shape_clover(vec2(st.y - 0.2, st.x), vec2(0.5), 1.3);\n}\nUDF shape_clover3(vec2 st, vec2 center) {\n\treturn shape_clover(st, center, 3.0);\n}\nUDF shape_clover3(vec2 st) {\n\treturn shape_clover(st, vec2(0.5), 3.0);\n}\nUDF shape_clover4(vec2 st, vec2 center) {\n\treturn shape_clover(st, center, 4.0);\n}\nUDF shape_clover4(vec2 st) {\n\treturn shape_clover(st, vec2(0.5), 4.0);\n}\nUDF shape_clover5(vec2 st, vec2 center) {\n\treturn shape_clover(st, center, 5.0);\n}\nUDF shape_clover5(vec2 st) {\n\treturn shape_clover(st, vec2(0.5), 5.0);\n}\nUDF shape_flower(vec2 st, vec2 center, float num) {\n\tvec2 pt = polar(st, vec2(center));\n\tfloat x = pt.x;\n\tfloat y = (abs(cos((pt.y * num) * 0.5)) * 0.5) + 0.3;\n\treturn smoothstep(x - 0.01, x + 0.01, y);\n}\nUDF shape_gourd(vec2 st, vec2 center) {\n\treturn shape_flower(vec2(st.y, st.x), center, 1.7);\n}\nUDF shape_gourd(vec2 st) {\n\treturn shape_flower(vec2(st.y, st.x), vec2(0.5), 1.7);\n}\nUDF shape_flower3(vec2 st, vec2 center) {\n\treturn shape_flower(st, center, 3.0);\n}\nUDF shape_flower3(vec2 st) {\n\treturn shape_flower(st, vec2(0.5), 3.0);\n}\nUDF shape_flower4(vec2 st, vec2 center) {\n\treturn shape_flower(st, center, 4.0);\n}\nUDF shape_flower4(vec2 st) {\n\treturn shape_flower(st, vec2(0.5), 4.0);\n}\nUDF shape_flower5(vec2 st, vec2 center) {\n\treturn shape_flower(st, center, 5.0);\n}\nUDF shape_flower5(vec2 st) {\n\treturn shape_flower(st, vec2(0.5), 5.0);\n}\nUDF shape_bud(vec2 st, vec2 center, float num) {\n\tvec2 pt = polar(st, vec2(center));\n\tfloat x = pt.x;\n\tfloat y = (smoothstep(-0.5, 1.0, cos(pt.y * num)) * 0.2) + 0.5;\n\treturn smoothstep(x - 0.01, x + 0.01, y);\n}\nUDF shape_bud5(vec2 st, vec2 center) {\n\treturn shape_bud(st, center, 5.0);\n}\nUDF shape_bud5(vec2 st) {\n\treturn shape_bud(st, vec2(0.5), 5.0);\n}\nUDF shape_bud8(vec2 st, vec2 center) {\n\treturn shape_bud(st, center, 8.0);\n}\nUDF shape_bud8(vec2 st) {\n\treturn shape_bud(st, vec2(0.5), 8.0);\n}\nUDF shape_bud10(vec2 st, vec2 center) {\n\treturn shape_bud(st, center, 10.0);\n}\nUDF shape_bud10(vec2 st) {\n\treturn shape_bud(st, vec2(0.5), 10.0);\n}\nUDF shape_bud12(vec2 st, vec2 center) {\n\treturn shape_bud(st, center, 12.0);\n}\nUDF shape_bud12(vec2 st) {\n\treturn shape_bud(st, vec2(0.5), 12.0);\n}\nUDF shape_star(vec2 st, vec2 center) {\n\tfloat r = 0.45;\n\tfloat d = regular_polygon(st, center, r, 5);\n\tfloat a = (-2.0 * PI) / 5.0;\n\td = fill(d, 0.01);\n\tvec2 v0 = vec2(0, r);\n\tfor (int i = 0; i < 5; i++) {\n\t\tvec2 v1 = rotate(v0, float(i) * a);\n\t\tvec2 v2 = rotate(v0, float(i + 1) * a);\n\t\tfloat l = length(v2 - v1);\n\t\tfloat c = 0.5 / cos(PI / 5.0);\n\t\tvec2 p = rotate(v2, v1, -PI / 5.0);\n\t\tp += ((1.0 - c) * (v1 - p));\n\t\tfloat d2 = sdf_triangle(st - center, v1, v2, p);\n\t\td2 = fill(d2, 0.01);\n\t\td = udf_complement(d, d2);\n\t}\n\treturn d;\n}\nUDF shape_regular_polygon(vec2 st, vec2 center, const int edges) {\n\tfloat d = regular_polygon(st, center, 0.45, edges);\n\treturn fill(d, 0.01);\n}\nUDF shape_star(vec2 st) {\n\treturn shape_star(st, vec2(0.5));\n}\nUDF shape_triangle(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 3);\n}\nUDF shape_triangle(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 3);\n}\nUDF shape_rhombus(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 4);\n}\nUDF shape_rhombus(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 4);\n}\nUDF shape_pentagon(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 5);\n}\nUDF shape_pentagon(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 5);\n}\nUDF shape_hexagon(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 6);\n}\nUDF shape_hexagon(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 6);\n}\nUDF shape_heptagon(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 7);\n}\nUDF shape_heptagon(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 7);\n}\nUDF shape_octagon(vec2 st, vec2 center) {\n\treturn shape_regular_polygon(st, center, 8);\n}\nUDF shape_octagon(vec2 st) {\n\treturn shape_regular_polygon(st, vec2(0.5), 8);\n}\nUDF shape_hypocycloid(vec2 st, vec2 center, const int edges) {\n\tfloat d = regular_polygon(st, center, 0.45, edges, true);\n\treturn fill(d, 0.01);\n}\nUDF shape_hypocycloid(vec2 st, const int edges) {\n\treturn shape_hypocycloid(st, vec2(0.5), edges);\n}\nUDF shape_cross(vec2 st, vec2 center, float w, float h) {\n\tvec2 p1 = center - (0.5 * vec2(w, h));\n\tvec2 p2 = center - (0.5 * vec2(h, w));\n\tfloat d1 = sdf_rect(st, p1, w, h);\n\tfloat d2 = sdf_rect(st, p2, h, w);\n\treturn fill(udf_union(d1, d2), 0.01);\n}\nUDF shape_cross(vec2 st, vec2 center) {\n\treturn shape_cross(st, center, 0.8, 0.2);\n}\nUDF shape_cross(vec2 st, float w, float h) {\n\treturn shape_cross(st, vec2(0.5), w, h);\n}\nUDF shape_cross(vec2 st) {\n\treturn shape_cross(st, vec2(0.5), 0.8, 0.2);\n}\n#endif\n"},function(e,t){e.exports="#ifndef M_SHAPER\n#define M_SHAPER\nfloat quadratic_bezier(float x, float a, float b) {\n\tfloat epsilon = 0.00001;\n\ta = max(0.0, min(1.0, a));\n\tb = max(0.0, min(1.0, b));\n\tif (a == 0.5) {\n\t\ta += epsilon;\n\t}\n\tfloat om2a = 1.0 - (2.0 * a);\n\tfloat t = (sqrt((a * a) + (om2a * x)) - a) / om2a;\n\tfloat y = ((1.0 - (2.0 * b)) * (t * t)) + ((2.0 * b) * t);\n\treturn y;\n}\nfloat slope_from_t(float t, float A, float B, float C) {\n\tfloat dtdx = 1.0 / (((((3.0 * A) * t) * t) + ((2.0 * B) * t)) + C);\n\treturn dtdx;\n}\nfloat x_from_t(float t, float A, float B, float C, float D) {\n\tfloat x = (((A * ((t * t) * t)) + (B * (t * t))) + (C * t)) + D;\n\treturn x;\n}\nfloat y_from_t(float t, float E, float F, float G, float H) {\n\tfloat y = (((E * ((t * t) * t)) + (F * (t * t))) + (G * t)) + H;\n\treturn y;\n}\nfloat cubic_bezier(float x, float a, float b, float c, float d) {\n\tfloat y0a = 0.00;\n\tfloat x0a = 0.00;\n\tfloat y1a = b;\n\tfloat x1a = a;\n\tfloat y2a = d;\n\tfloat x2a = c;\n\tfloat y3a = 1.00;\n\tfloat x3a = 1.00;\n\tfloat A = ((x3a - (3.0 * x2a)) + (3.0 * x1a)) - x0a;\n\tfloat B = ((3.0 * x2a) - (6.0 * x1a)) + (3.0 * x0a);\n\tfloat C = (3.0 * x1a) - (3.0 * x0a);\n\tfloat D = x0a;\n\tfloat E = ((y3a - (3.0 * y2a)) + (3.0 * y1a)) - y0a;\n\tfloat F = ((3.0 * y2a) - (6.0 * y1a)) + (3.0 * y0a);\n\tfloat G = (3.0 * y1a) - (3.0 * y0a);\n\tfloat H = y0a;\n\tfloat currentt = x;\n\tconst int nRefinementIterations = 5;\n\tfor (int i = 0; i < nRefinementIterations; i++) {\n\t\tfloat currentx = x_from_t(currentt, A, B, C, D);\n\t\tfloat currentslope = slope_from_t(currentt, A, B, C);\n\t\tcurrentt -= ((currentx - x) * currentslope);\n\t\tcurrentt = clamp(currentt, 0.0, 1.0);\n\t}\n\tfloat y = y_from_t(currentt, E, F, G, H);\n\treturn y;\n}\n#endif\n"},function(e,t){e.exports="#ifndef MOD_BOX\n#define MOD_BOX\nstruct box2 {\n\tvec2 a;\n\tvec2 b;\n\tvec2 c;\n\tvec2 d;\n};\nvec2 center(box2 box) {\n\treturn (box.a + box.c) * 0.5;\n}\nbox2 create_box(vec2 point, float w, float h, vec2 anchor) {\n\tvec2 size = vec2(w, h);\n\tvec2 a = point + (size * (vec2(0.0) - anchor));\n\tvec2 b = point + (size * (vec2(1.0, 0.0) - anchor));\n\tvec2 c = point + (size * (vec2(1.0) - anchor));\n\tvec2 d = point + (size * (vec2(0.0, 1.0) - anchor));\n\treturn box2(a, b, c, d);\n}\nbox2 create_box(vec2 point, float w, float h) {\n\treturn create_box(point, w, h, vec2(0.0));\n}\nbox2 create_box(vec2 point, float wh) {\n\treturn create_box(point, wh, wh, vec2(0.0));\n}\nbox2 create_box(float w, float h) {\n\treturn create_box(vec2(0.0), w, h, vec2(0.0));\n}\nbox2 create_box(float wh) {\n\treturn create_box(vec2(0.0), wh, wh, vec2(0.0));\n}\nbox2 create_box() {\n\treturn create_box(vec2(0.0), 1.0, 1.0, vec2(0.0));\n}\nvec2 box_quad(vec2 p, box2 box) {\n\tvec2 a = box.a;\n\tvec2 b = box.b;\n\tvec2 c = box.c;\n\tvec2 d = box.d;\n\tfloat d1 = sdf_line(p, a, b);\n\tfloat d2 = sdf_line(p, b, c);\n\tfloat d3 = sdf_line(p, c, d);\n\tfloat d4 = sdf_line(p, d, a);\n\tif (((((d1 >= 0.0) && (d2 >= 0.0)) && (d3 >= 0.0)) && (d4 >= 0.0)) || ((((d1 <= 0.0) && (d2 <= 0.0)) && (d3 <= 0.0)) && (d4 <= 0.0))) {\n\t\tvec2 v1 = b - a;\n\t\tvec2 v2 = d - a;\n\t\tvec2 vp = p - a;\n\t\tfloat l1 = length(v1);\n\t\tfloat l2 = length(v2);\n\t\tfloat p1 = dot(vp, v1) / l1;\n\t\tfloat p2 = dot(vp, v2) / l2;\n\t\tfloat ang = angle(v2, v1);\n\t\tfloat x = p1 - (abs(d1) / tan(ang));\n\t\tfloat y = p2 - (abs(d4) / tan(ang));\n\t\tx /= l1;\n\t\ty /= l2;\n\t\treturn vec2(x, y);\n\t}\n\treturn vec2(-1.0);\n}\nbox2 transform(box2 box, mat3 matrix) {\n\treturn box2(transform(box.a, matrix), transform(box.b, matrix), transform(box.c, matrix), transform(box.d, matrix));\n}\nbox2 translate(box2 box, vec2 xy) {\n\treturn box2(translate(box.a, xy), translate(box.b, xy), translate(box.c, xy), translate(box.d, xy));\n}\nbox2 scale(box2 box, vec2 origin, vec2 scaleXY) {\n\treturn box2(scale(box.a, origin, scaleXY), scale(box.b, origin, scaleXY), scale(box.c, origin, scaleXY), scale(box.d, origin, scaleXY));\n}\nbox2 scale(box2 box, vec2 scaleXY) {\n\treturn box2(scale(box.a, scaleXY), scale(box.b, scaleXY), scale(box.c, scaleXY), scale(box.d, scaleXY));\n}\nbox2 rotate(box2 box, vec2 origin, float ang) {\n\treturn box2(rotate(box.a, origin, ang), rotate(box.b, origin, ang), rotate(box.c, origin, ang), rotate(box.d, origin, ang));\n}\nbox2 rotate(box2 box, float ang) {\n\treturn box2(rotate(box.a, ang), rotate(box.b, ang), rotate(box.c, ang), rotate(box.d, ang));\n}\nbox2 skew(box2 box, vec2 origin, vec2 skewXY) {\n\treturn box2(skew(box.a, origin, skewXY), skew(box.b, origin, skewXY), skew(box.c, origin, skewXY), skew(box.d, origin, skewXY));\n}\nbox2 skew(box2 box, vec2 skewXY) {\n\treturn box2(skew(box.a, skewXY), skew(box.b, skewXY), skew(box.c, skewXY), skew(box.d, skewXY));\n}\n#endif\n"},function(e,t){e.exports="#ifndef MOD_TRANSFORM\n#define MOD_TRANSFORM\nvec2 transform(vec2 v0, mat3 matrix) {\n\treturn vec2(matrix * vec3(v0, 1.0));\n}\nvec2 translate(vec2 v0, vec2 xy) {\n\tmat3 m = mat3(1, 0, 0, 0, 1, 0, xy.x, xy.y, 1);\n\treturn transform(v0, m);\n}\nvec2 scale(vec2 v0, vec2 origin, vec2 scale) {\n\tmat3 m = mat3(scale.x, 0, 0, 0, scale.y, 0, 0, 0, 1);\n\treturn transform(v0 - origin, m) + origin;\n}\nvec2 scale(vec2 v0, vec2 scaleXY) {\n\treturn scale(v0, vec2(0.0), scaleXY);\n}\nvec2 rotate(vec2 v0, vec2 origin, float ang) {\n\tfloat sinA = sin(ang);\n\tfloat cosA = cos(ang);\n\tmat3 m = mat3(cosA, -sinA, 0, sinA, cosA, 0, 0, 0, 1);\n\treturn transform(v0 - origin, m) + origin;\n}\nvec2 rotate(vec2 v0, float ang) {\n\treturn rotate(v0, vec2(0.0), ang);\n}\nvec2 skew(vec2 v0, vec2 origin, vec2 skew) {\n\tmat3 m = mat3(1, tan(skew.y), 0, tan(skew.x), 1, 0, 0, 0, 1);\n\treturn transform(v0 - origin, m) + origin;\n}\nvec2 skew(vec2 v0, vec2 skewXY) {\n\treturn skew(v0, vec2(0.0), skewXY);\n}\n#endif\n"},function(e,t){e.exports="#ifndef M_GRAPH\n#define M_GRAPH\n#pragma include <stdlib>\n#pragma include <shaper>\n#pragma include <transform>\n#ifndef SDF\n#define SDF float\n#endif\n#ifndef UDF\n#define UDF float\n#endif\n#ifndef PLOT\n#define PLOT(f, st, step) sdf_plot(st, vec2(st.x - step, f(st.x - step)), vec2(st.x, f(st.x)), vec2(st.x + step, f(st.x + step)))\n#endif\n#ifndef SPRITE\n#define SPRITE(quad, f) if(quad.x >= 0.0 && quad.x <= 1.0) f(quad);\n#endif\nSDF sdf_line(vec2 p, vec2 v1, vec2 v2) {\n\tvec2 pd = p - v1;\n\tvec2 pd2 = p - v2;\n\tvec2 seg = v2 - v1;\n\treturn ((pd.x * seg.y) - (pd.y * seg.x)) / length(seg);\n}\nSDF sdf_line(vec2 p, vec2 v) {\n\treturn sdf_line(p, vec2(0), v);\n}\nSDF sdf_seg(vec2 p, vec2 v1, vec2 v2) {\n\tvec2 pd = p - v1;\n\tvec2 pd2 = p - v2;\n\tvec2 seg = v2 - v1;\n\tfloat l = length(seg);\n\tfloat d = abs((pd.x * seg.y) - (pd.y * seg.x)) / l;\n\tfloat proj = ((pd.x * seg.x) + (pd.y * seg.y)) / l;\n\tif ((proj >= 0.0) && (proj <= l))\n\t\treturn d;\n\treturn min(length(pd), length(pd2));\n}\nSDF sdf_seg(vec2 p, vec2 v) {\n\treturn sdf_seg(p, vec2(0), v);\n}\nSDF sdf_plot(vec2 p, vec2 v1, vec2 v2, vec2 v3) {\n\tfloat d1 = sdf_seg(p, v1, v2);\n\tfloat d2 = sdf_seg(p, v2, v3);\n\treturn min(d1, d2);\n}\nUDF stroke(SDF d, float d0, float w, float smth) {\n\tfloat th = 0.5 * w;\n\tsmth = smth * w;\n\tfloat start = d0 - th;\n\tfloat end = d0 + th;\n\treturn smoothstep(start, start + smth, d) - smoothstep(end - smth, end, d);\n}\nUDF stroke(SDF d, float w, float smth) {\n\treturn stroke(d, 0.0, w, smth);\n}\nUDF stroke(SDF d, float w) {\n\treturn stroke(d, 0.0, w, 0.0);\n}\nSDF sdf_triangle(vec2 st, vec2 a, vec2 b, vec2 c) {\n\tvec2 va = a - b;\n\tvec2 vb = b - c;\n\tvec2 vc = c - a;\n\tfloat d1 = sdf_line(st, a, b);\n\tfloat d2 = sdf_line(st, b, c);\n\tfloat d3 = sdf_line(st, c, a);\n\tfloat l = abs((va.x * vb.y) - (va.y * vb.x)) / ((length(va) + length(vb)) + length(vc));\n\tif ((((d1 >= 0.0) && (d2 >= 0.0)) && (d3 >= 0.0)) || (((d1 <= 0.0) && (d2 <= 0.0)) && (d3 <= 0.0))) {\n\t\treturn min(abs(d1), min(abs(d2), abs(d3))) / l;\n\t}\n\td1 = sdf_seg(st, a, b);\n\td2 = sdf_seg(st, b, c);\n\td3 = sdf_seg(st, c, a);\n\treturn -min(abs(d1), min(abs(d2), abs(d3))) / l;\n}\nSDF sdf_rect(vec2 st, vec2 p, float w, float h) {\n\tvec2 a = p;\n\tvec2 b = p + vec2(w, 0.0);\n\tvec2 c = p + vec2(w, h);\n\tvec2 d = p + vec2(0.0, h);\n\tfloat d1 = sdf_line(st, a, b);\n\tfloat d2 = sdf_line(st, b, c);\n\tfloat d3 = sdf_line(st, c, d);\n\tfloat d4 = sdf_line(st, d, a);\n\tfloat l = min(w, h) * 0.5;\n\tif (((((d1 >= 0.0) && (d2 >= 0.0)) && (d3 >= 0.0)) && (d4 >= 0.0)) || ((((d1 <= 0.0) && (d2 <= 0.0)) && (d3 <= 0.0)) && (d4 <= 0.0))) {\n\t\treturn min(abs(d1), min(abs(d2), min(abs(d3), abs(d4)))) / l;\n\t}\n\td1 = sdf_seg(st, a, b);\n\td2 = sdf_seg(st, b, c);\n\td3 = sdf_seg(st, c, d);\n\td4 = sdf_seg(st, d, a);\n\treturn -min(abs(d1), min(abs(d2), min(abs(d3), abs(d4)))) / l;\n}\nSDF sdf_circle(vec2 st, vec2 c, float r) {\n\treturn 1.0 - (length(st - c) / r);\n}\nSDF sdf_ellipse(vec2 st, vec2 c, float a, float b) {\n\tvec2 p = st - c;\n\treturn 1.0 - sqrt(pow(p.x / a, 2.0) + pow(p.y / b, 2.0));\n}\nSDF sdf_ellipse(vec2 st, vec2 c, float a, float b, float sAng, float eAng) {\n\tvec2 ua = vec2(cos(sAng), sin(sAng));\n\tvec2 ub = vec2(cos(eAng), sin(eAng));\n\tfloat d1 = sdf_line(st, c, ua + c);\n\tfloat d2 = sdf_line(st, c, ub + c);\n\tfloat d3 = sdf_ellipse(st, c, a, b);\n\tfloat r = min(a, b);\n\tvec2 v = st - c;\n\tfloat ang = angle(v, vec2(1.0, 0));\n\tif ((eAng - sAng) > (2.0 * PI)) {\n\t\treturn d3;\n\t}\n\tif ((ang >= sAng) && (ang <= eAng)) {\n\t\tfloat m = max(a, b);\n\t\tfloat d11 = sdf_seg(st, c, (ua * m) + c);\n\t\tfloat d12 = sdf_seg(st, c, (ub * m) + c);\n\t\tif (d3 >= 0.0) {\n\t\t\treturn min(abs(d11 / r), min(abs(d12 / r), d3));\n\t\t}\n\t\treturn d3;\n\t}\n\tfloat pa = dot(ua, v);\n\tfloat pb = dot(ub, v);\n\tif ((pa < 0.0) && (pb < 0.0)) {\n\t\treturn -length(st - c) / r;\n\t}\n\tif ((d1 > 0.0) && (pa >= 0.0)) {\n\t\tvec2 va = pa * ua;\n\t\tfloat da = pow(va.x / a, 2.0) + pow(va.y / b, 2.0);\n\t\tif ((d3 > 0.0) || (da <= pow(1.0 + abs(d1 / r), 2.0))) {\n\t\t\treturn -abs(d1 / r);\n\t\t}\n\t\telse {\n\t\t\treturn d3;\n\t\t}\n\t}\n\tif ((d2 < 0.0) && (pb >= 0.0)) {\n\t\tvec2 vb = pb * ub;\n\t\tfloat db = pow(vb.x / a, 2.0) + pow(vb.y / b, 2.0);\n\t\tif ((d3 >= 0.0) || (db <= pow(1.0 + abs(d2 / r), 2.0))) {\n\t\t\treturn -abs(d2 / r);\n\t\t}\n\t\telse {\n\t\t\treturn d3;\n\t\t}\n\t}\n}\nSDF sdf_arc(vec2 st, vec2 c, float r, float sAng, float eAng) {\n\treturn sdf_ellipse(st, c, r, r, sAng, eAng);\n}\nSDF sdf_rhombus(vec2 st, vec2 cr, float w, float h) {\n\tvec2 a = cr - vec2(0.5 * w, 0);\n\tvec2 b = cr - vec2(0, 0.5 * h);\n\tvec2 c = cr + vec2(0.5 * w, 0);\n\tvec2 d = cr + vec2(0, 0.5 * h);\n\tvec2 va = a - b;\n\tvec2 vb = b - c;\n\tvec2 vc = c - d;\n\tvec2 vd = d - a;\n\tfloat d1 = sdf_line(st, a, b);\n\tfloat d2 = sdf_line(st, b, c);\n\tfloat d3 = sdf_line(st, c, d);\n\tfloat d4 = sdf_line(st, d, a);\n\tfloat l = min(w, h) * 0.5;\n\tif (((((d1 >= 0.0) && (d2 >= 0.0)) && (d3 >= 0.0)) && (d4 >= 0.0)) || ((((d1 <= 0.0) && (d2 <= 0.0)) && (d3 <= 0.0)) && (d4 <= 0.0))) {\n\t\treturn min(abs(d1), min(abs(d2), min(abs(d3), abs(d4)))) / l;\n\t}\n\td1 = sdf_seg(st, a, b);\n\td2 = sdf_seg(st, b, c);\n\td3 = sdf_seg(st, c, d);\n\td4 = sdf_seg(st, d, a);\n\treturn -min(abs(d1), min(abs(d2), min(abs(d3), abs(d4)))) / l;\n}\nSDF regular_polygon(vec2 st, vec2 center, float r, float rotation, const int edges, bool hypocycloid) {\n\tvec2 p = st - center;\n\tvec2 v0 = vec2(0, r);\n\tv0 = rotate(v0, -rotation);\n\tfloat a = (2.0 * PI) / float(edges);\n\tfloat ang = angle(v0, p);\n\tang = floor(ang / a);\n\tvec2 v1 = rotate(v0, a * ang);\n\tvec2 v2 = rotate(v0, a * (ang + 1.0));\n\tfloat c_a = cos(0.5 * a);\n\tfloat l = r * c_a;\n\tfloat d = sdf_line(p, v1, v2);\n\tif (hypocycloid && (d >= 0.0)) {\n\t\tvec2 c = (v1 + v2) / 2.0;\n\t\tfloat r2 = r * tan(0.5 * a);\n\t\tvec2 ce = c / (c_a * c_a);\n\t\td = (distance(p, ce) - r2) / (length(ce) - r2);\n\t\treturn d;\n\t}\n\treturn d / l;\n}\nSDF regular_polygon(vec2 st, vec2 center, float r, float rotation, const int edges) {\n\treturn regular_polygon(st, center, r, rotation, edges, false);\n}\nSDF regular_polygon(vec2 st, vec2 center, float r, const int edges, bool hypocycloid) {\n\treturn regular_polygon(st, center, r, 0.0, edges, true);\n}\nSDF regular_polygon(vec2 st, vec2 center, float r, const int edges) {\n\treturn regular_polygon(st, center, r, 0.0, edges, false);\n}\nUDF fill(SDF d, float start, float end, float smth_start, float smth_end) {\n\tsmth_start = (end - start) * smth_start;\n\tsmth_end = (end - start) * smth_end;\n\treturn smoothstep(start, start + smth_start, d) - smoothstep(end - smth_end, end, d);\n}\nUDF fill(SDF d, float start, float end, float smth) {\n\treturn fill(d, start, end, smth, smth);\n}\nUDF fill(SDF d, float start, float smth) {\n\treturn fill(d, start, 1.0, smth, 0.0);\n}\nUDF fill(SDF d, float smth) {\n\treturn fill(d, 0.0, 1.0, smth, 0.0);\n}\nUDF fill(SDF d) {\n\treturn fill(d, 0.0, 1.0, 0.0, 0.0);\n}\nUDF udf_intersect(UDF d1, UDF d2) {\n\tif ((d1 > 0.0) && (d2 > 0.0)) {\n\t\treturn min(d1, d2);\n\t}\n\treturn 0.0;\n}\nUDF udf_union(UDF d1, UDF d2) {\n\tif ((d1 > 0.0) || (d2 > 0.0)) {\n\t\treturn max(d1, d2);\n\t}\n\treturn 0.0;\n}\nUDF udf_complement(UDF d1, UDF d2) {\n\tif (((d1 > 0.0) && (d2 == 0.0)) || ((d1 == 0.0) && (d2 > 0.0)))\n\t\treturn 1.0;\n\treturn 0.0;\n}\n#pragma include <box>\n#pragma include <shapes>\n#endif\n"},function(e,t){e.exports="#ifndef M_COLOR\n#define M_COLOR\n#ifndef UDF\n#define UDF float\n#endif\nvec3 rgb2hsb(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + ((q.w - q.y) / ((6.0 * d) + e))), d / (q.x + e), q.x);\n}\nvec3 hsb2rgb(vec3 c) {\n\tvec3 rgb = clamp(abs(mod((c.x * 6.0) + vec3(0.0, 4.0, 2.0), 6.0) - 3.0) - 1.0, 0.0, 1.0);\n\trgb = (rgb * rgb) * (3.0 - (2.0 * rgb));\n\treturn c.z * mix(vec3(1.0), rgb, c.y);\n}\nvec4 rgba_color(int r, int g, int b, float a) {\n\treturn vec4(float(r / 255), float(g / 255), float(b / 255), a);\n}\nvec4 rgba_color(float r, float g, float b, float a) {\n\treturn vec4(r, g, b, a);\n}\nvec4 rgba_color(vec4 v) {\n\treturn v;\n}\nvec4 rgba_color(vec3 v, float a) {\n\treturn vec4(v, a);\n}\nvec3 rgb_color(int r, int g, int b) {\n\treturn rgba_color(r, g, b, 1.0).rgb;\n}\nvec3 rgb_color(float r, float g, float b) {\n\treturn rgba_color(r, g, b, 1.0).rgb;\n}\nvec3 rgb_color(vec3 v) {\n\treturn vec4(v, 1.0).rgb;\n}\nvec4 hsba_color(float h, float s, float b, float a) {\n\treturn vec4(hsb2rgb(vec3(h, s, b)), a);\n}\nvec4 hsba_color(vec4 v) {\n\treturn vec4(hsb2rgb(v.xyz), v.w);\n}\nvec4 hsba_color(vec3 v, float a) {\n\treturn vec4(hsb2rgb(v), a);\n}\nvec3 hsb_color(float h, float s, float b) {\n\treturn hsba_color(h, s, b, 1.0).rgb;\n}\nvec3 hsb_color(vec3 v) {\n\treturn hsba_color(v, 1.0).rgb;\n}\n#ifndef RGB\n#define RGB rgb_color\n#endif\n#ifndef RGBA\n#define RGBA rgba_color\n#endif\n#ifndef HSB\n#define HSB hsb_color\n#endif\n#ifndef HSBA\n#define HSBA hsba_color\n#endif\nvoid color(UDF d, vec4 c1, vec4 c2) {\n\tgl_FragColor = mix(c2, c1, d);\n}\nvoid color(UDF d, vec4 c1, vec3 c2) {\n\tcolor(d, c1, vec4(c2, 1.0));\n}\nvoid color(UDF d, vec3 c1, vec4 c2) {\n\tcolor(d, vec4(c1, 1.0), c2);\n}\nvoid color(UDF d, vec3 c1, vec3 c2) {\n\tcolor(d, vec4(c1, 1.0), vec4(c2, 1.0));\n}\nvoid color(UDF d, vec4 c) {\n\tcolor(d, c, gl_FragColor);\n}\nvoid color(UDF d, vec3 c) {\n\tcolor(d, vec4(c, 1.0), gl_FragColor);\n}\n#endif\n"},function(e,t){e.exports="#ifndef M_PATTERN\n#define M_PATTERN\nvec2 grid_xy(vec2 st, vec2 grid) {\n\treturn fract(st * grid);\n}\nvoid grid_overlap(vec2 st, vec2 grid, inout vec2 overlap[4]) {\n\tvec2 v = fract(st * grid);\n\toverlap[0] = v;\n\toverlap[1] = v - vec2(1.0, 0.0);\n\toverlap[2] = v - vec2(0.0, 1.0);\n\toverlap[3] = v - vec2(1.0, 1.0);\n}\nvec2 grid_index(vec2 st, vec2 grid) {\n\treturn floor(st * grid);\n}\nbool grid_odd_row(vec2 idx, vec2 grid) {\n\treturn mod(idx.y, 2.0) != 0.0;\n}\nbool grid_even_row(vec2 idx, vec2 grid) {\n\treturn mod(idx.y, 2.0) == 0.0;\n}\nbool grid_odd_col(vec2 idx, vec2 grid) {\n\treturn mod(idx.x, 2.0) != 0.0;\n}\nbool grid_even_col(vec2 idx, vec2 grid) {\n\treturn mod(idx.x, 2.0) == 0.0;\n}\nbool grid_odd(vec2 idx, vec2 grid) {\n\treturn ((mod(idx.x, 2.0) != 0.0) && (mod(idx.y, 2.0) == 0.0)) || ((mod(idx.x, 2.0) == 0.0) && (mod(idx.y, 2.0) != 0.0));\n}\nbool grid_even(vec2 idx, vec2 grid) {\n\treturn !grid_odd(idx, grid);\n}\n#ifndef OCTAVES\n#define OCTAVES 6\n#endif\nfloat mist(vec2 st) {\n\tfloat value = 0.0;\n\tfloat amplitude = 0.5;\n\tfloat frequency = 0.0;\n\tfor (int i = 0; i < OCTAVES; i++) {\n\t\tvalue += (amplitude * noise(st));\n\t\tst *= 2.0;\n\t\tamplitude *= 0.5;\n\t}\n\treturn value;\n}\nfloat juila_set(vec2 st, vec2 center, float dist, vec2 c, float scale) {\n\tconst int max_iterations = 255;\n\tvec2 uv = 2.5 * (st - center);\n\tint count = max_iterations;\n\tfor (int i = 0; i < max_iterations; i++) {\n\t\tuv = c + vec2((uv.x * uv.x) - (uv.y * uv.y), (uv.x * uv.y) * 2.0);\n\t\tif (dot(uv, uv) > 4.0) {\n\t\t\tcount = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn float(count) * scale;\n}\n#endif\n"},function(e,t,n){"use strict";n.r(t);var r=n(34).default;r.autoLoad(),t.default=r},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),i=new k(r||[]);return a._invoke=function(e,t,n){var r=d;return function(o,a){if(r===l)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=D(i,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=l;var s=u(e,t,n);if("normal"===s.type){if(r=n.done?v:f,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=v,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d="suspendedStart",f="suspendedYield",l="executing",v="completed",p={};function h(){}function b(){}function m(){}var g={};g[a]=function(){return this};var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==n&&r.call(x,a)&&(g=x);var y=m.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(e){var t;this._invoke=function(n,o){function a(){return new Promise(function(t,a){!function t(n,o,a,i){var c=u(e[n],e,o);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?Promise.resolve(d.__await).then(function(e){t("next",e,a,i)},function(e){t("throw",e,a,i)}):Promise.resolve(d).then(function(e){s.value=e,a(s)},function(e){return t("throw",e,a,i)})}i(c.arg)}(n,o,t,a)})}return t=t?t.then(a,a):a()}}function D(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,D(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function T(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:S}}function S(){return{value:t,done:!0}}return b.prototype=y.constructor=m,m.constructor=b,m[c]=b.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},w(E.prototype),E.prototype[i]=function(){return this},e.AsyncIterator=E,e.async=function(t,n,r,o){var a=new E(s(t,n,r,o));return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(y),y[c]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(3);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(0),i=n.n(a),c=n(2),s=n.n(c),u=n(6),d=n.n(u),f=n(5),l=n.n(f),v=n(9),p=n.n(v),h=n(3),b=n.n(h),m=n(7),g=n.n(m),_=n(10),x=n.n(_),y=n(4),w=n.n(y),E=n(11),D=n.n(E);var F='This page requires a browser that supports WebGL.<br/>\n<a href="http://get.webgl.org">Click here to upgrade your browser.</a>',A='It doesn\'t appear your computer can support WebGL.<br/>\n<a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>';function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float32Array;if(null==e)return e;if(e instanceof t)return e;if(null==e[0]||null==e[0].length)return new t(e);for(var n=e[0].length,r=e.length,o=new t(n*r),a=0,i=0;i<r;i++)for(var c=0;c<n;c++)o[a++]=e[i][c];return o}var T={};function S(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!T[e]){var n=new Image;n.crossOrigin="anonymous",T[e]=new Promise(function(r){n.onload=function(){t&&"function"==typeof createImageBitmap?createImageBitmap(n,{imageOrientation:"flipY"}).then(function(t){T[e]=t,r(t)}):(T[e]=n,r(n))},n.src=e})}return Promise.resolve(T[e])}var U=n(12),O=n.n(U),P=n(8),R=n.n(P),L=n(13),I=n.n(L),B={},C=Symbol("renderFrameID"),j={};function N(e){return M.apply(this,arguments)}function M(){return(M=s()(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!j[t]){e.next=2;break}return e.abrupt("return",j[t]);case 2:return e.next=4,fetch(t);case 4:if(!((n=e.sent).status>=200&&n.status<300)){e.next=11;break}return e.next=8,n.text();case 8:return r=e.sent,j[t]=r,e.abrupt("return",r);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var G={int:"1i",ivec2:"2i",ivec3:"3i",ivec4:"4i",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",mat2:"Matrix2fv",mat3:"Matrix3fv",mat4:"Matrix4fv",sampler2D:"sampler2D"},H=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d()(this,e),this.options=Object.assign({},e.defaultOptions,r),this.canvas=t,this.options.webgl2?n=t.getContext("webgl2",this.options):(n=function(e,t){function n(t){var n=e.parentNode;n&&(n.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr>\n    <td align="center">\n    <div style="display: table-cell; vertical-align: middle;">\n    <div>'.concat(t,"</div>\n    </div>\n    </td></tr></table>"))}if(!window.WebGLRenderingContext)return n(F),null;var r=function(e,t){for(var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],r=null,o=0;o<n.length;++o){try{r=e.getContext(n[o],t)}catch(e){}if(r)break}return r}(e,t);return r||n(A),r}(t,this.options),this.aia_ext=n.getExtension("ANGLE_instanced_arrays")),this.gl=n,n.viewport(0,0,t.width,t.height),n.clearColor(0,0,0,0),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),this.textures=[],this.programs=[],this._events={}}return l()(e,null,[{key:"addLibs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(B,e)}},{key:"FLOAT",value:function(e){return k(e)}},{key:"UNSIGNED_BYTE",value:function(e){return k(e,Uint8Array)}},{key:"UNSIGNED_SHORT",value:function(e){return k(e,Uint16Array)}},{key:"BYTE",value:function(e){return k(e,Int8Array)}},{key:"SHORT",value:function(e){return k(e,Int16Array)}}]),l()(e,[{key:"_declareUniform",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1f",o=this.gl,a=o.getUniformLocation(e,t),i=this;if("sampler2D"===r){var c=e._samplerMap,s=e._bindTextures;Object.defineProperty(e.uniforms,t,{get:function(){return n},set:function(e){n=e;var r=null!=c[t]?c[t]:s.length;s[r]=e,function(e,t,n){e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t)}(o,e,r),c[t]||(c[t]=r,o.uniform1i(a,r)),i.options.autoUpdate&&i.update()},configurable:!1,enumerable:!0})}else{var u=0===r.indexOf("Matrix"),d=!u&&/v$/.test(r),f=o["uniform".concat(r)].bind(o);Object.defineProperty(e.uniforms,t,{get:function(){return n},set:function(e){n=e,"number"==typeof e&&(e=[e]),u?f(a,!1,e):d?f(a,e):f.apply(void 0,[a].concat(D()(e))),i.options.autoUpdate&&i.update()},configurable:!1,enumerable:!0})}}},{key:"_draw",value:function(){var t=this,n=this.program;n.meshData.forEach(function(r,a){var i=r.positions,c=r.cells,s=r.instanceCount,u=r.attributes,d=r.uniforms,f=r.textureCoord,l=r.enableBlend,v=t.gl;if(l?v.enable(v.BLEND):v.disable(v.BLEND),v.bindBuffer(v.ARRAY_BUFFER,n._buffers.verticesBuffer),v.bufferData(v.ARRAY_BUFFER,i,v.STATIC_DRAW),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,n._buffers.cellsBuffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c,v.STATIC_DRAW),u&&Object.values(u).forEach(function(e){var r=e.name,o=e.data,a=e.divisor;if(v.bindBuffer(v.ARRAY_BUFFER,n._buffers[r]),v.bufferData(v.ARRAY_BUFFER,o,v.STATIC_DRAW),null!=a){var i=v.getAttribLocation(n,r);v.enableVertexAttribArray(i),v.vertexAttribDivisor?v.vertexAttribDivisor(i,a):t.aia_ext&&t.aia_ext.vertexAttribDivisorANGLE(i,a)}}),d&&Object.entries(d).forEach(function(e){var n=o()(e,2),r=n[0],a=n[1];t.uniforms[r]=a}),n._enableTextures&&n._buffers.texCoordBuffer){var p=f||function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=[],r=e.length,o=0;o<r;o++)o%t<2&&n.push(.5*(e[o]+1));return n}(i,n._dimension);v.bindBuffer(v.ARRAY_BUFFER,n._buffers.texCoordBuffer),v.bufferData(v.ARRAY_BUFFER,e.FLOAT(p),v.STATIC_DRAW)}null!=s?v.drawElementsInstanced?v.drawElementsInstanced(v.TRIANGLES,c.length,v.UNSIGNED_SHORT,0,s):t.aia_ext&&t.aia_ext.drawElementsInstancedANGLE(v.TRIANGLES,c.length,v.UNSIGNED_SHORT,0,s):v.drawElements(v.TRIANGLES,c.length,v.UNSIGNED_SHORT,0)})}},{key:"deleteProgram",value:function(e){var t=this.gl;this.program===e&&(this.startRender=!1,this[C]&&(cancelAnimationFrame(this[C]),delete this[C]),t.useProgram(null));var n=this.programs.indexOf(e);n>=0&&this.programs.splice(n,1),function(e,t){var n=t._buffers;Object.values(n).forEach(function(t){e.deleteBuffer(t)}),t._buffers={}}(t,e),t.deleteProgram(e)}},{key:"clearTextures",value:function(){var e=this.gl;this.textures.forEach(function(t){e.deleteTexture(t)}),this.textures=[]}},{key:"deleteTexture",value:function(e){var t=this.textures,n=t.indexOf(e);if(n>=0){var r=e._img;t.splice(n,1),this.gl.deleteTexture(e),"function"==typeof r.close&&r.close()}return e}},{key:"setMeshData",value:function(t){var n=this;Array.isArray(t)||(t=[t]);var r=this.program;r.meshData=t.map(function(t){var a=t.positions,i=t.instanceCount,c=t.cells,s=t.attributes,u=t.uniforms,d=t.textureCoord,f=t.enableBlend,l={positions:e.FLOAT(a),cells:e.USHORT(c),uniforms:u,enableBlend:!!f,textureCoord:e.FLOAT(d)};if(null!=i){if(!n.isWebGL2&&!n.aia_ext)throw new Error("Cannot use instanceCount in this rendering context, use webgl2 context instead.");l.instanceCount=i}return s&&(Object.entries(s).forEach(function(t){var a=o()(t,2),i=a[0],c=a[1];if(!r._attribute[i])throw new Error("Invalid attribute ".concat(i,"."));var u=r._attribute[i],d=u.name,f=u.type,l=c.data||c;if(Array.isArray(l)&&(l=e[f](l)),s[i]={name:d,data:l},null!=c.divisor){if(!n.isWebGL2&&!n.aia_ext)throw new Error("Cannot use divisor in this rendering context, use webgl2 context instead.");s[i].divisor=c.divisor}}),l.attributes=s),l}),this.options.autoUpdate&&this.update()}},{key:"createProgram",value:function(e,t){var n=this,r=/^\s*uniform\s+sampler2D/gm.test(e);null==e&&(e=R.a),null==t&&(t=r?I.a:O.a);var a=this.gl,i=function(e,t,n){var r=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var o="Vertex shader failed to compile.  The error log is:".concat(e.getShaderInfoLog(r));return console.error(o),-1}var a=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var i="Fragment shader failed to compile.  The error log is:".concat(e.getShaderInfoLog(a));return console.error(i),-1}var c=e.createProgram();if(e.attachShader(c,r),e.attachShader(c,a),e.linkProgram(c),!e.getProgramParameter(c,e.LINK_STATUS)){var s="Shader program failed to link.  The error log is:".concat(e.getProgramInfoLog(c));return console.error(s),-1}return e.deleteShader(r),e.deleteShader(a),c}(a,t,e);i.shaderText={vertexShader:t,fragmentShader:e},i._buffers={},i._attribute={},i.uniforms={},i._samplerMap={},i._bindTextures=[],i._enableTextures=r;var c=new RegExp("attribute vec(\\d) ".concat(this.options.vertexPosition),"im"),s=t.match(c);s&&(i._dimension=Number(s[1]));if(s=t.match(/^\s*attribute (\w+?)(\d*) (\w+)/gim))for(var u=0;u<s.length;u++){var d=s[u].match(/^\s*attribute (\w+?)(\d*) (\w+)/im);if(d&&d[3]!==this.options.vertexPosition&&d[3]!==this.options.vertexTextureCoord){var f=o()(d,4),l=f[1],v=f[2],p=f[3];"mat"===l&&(v=Math.pow(v,2)),i._buffers[p]=a.createBuffer(),i._attribute[p]={name:p,type:l,size:Number(v)||1}}}var h=/^\s*uniform\s+(\w+)\s+(\w+)(\[\d+\])?/gm;return(s=(s=t.match(h)||[]).concat(e.match(h)||[])).forEach(function(e){var t=e.match(/^\s*uniform\s+(\w+)\s+(\w+)(\[\d+\])?/).slice(1),r=o()(t,3),a=r[0],c=r[1],s=r[2];s=!!s,0!==(a=G[a]).indexOf("Matrix")&&s&&(a+="v"),n._declareUniform(i,c,a)}),i._buffers.verticesBuffer=a.createBuffer(),i._buffers.cellsBuffer=a.createBuffer(),i._enableTextures&&(i._buffers.texCoordBuffer=a.createBuffer()),this.programs.push(i),i}},{key:"useProgram",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.startRender=!1,this[C]&&(cancelAnimationFrame(this[C]),delete this[C]);var n=this.gl;n.useProgram(e),this.program=e;var r=e._dimension;n.bindBuffer(n.ARRAY_BUFFER,e._buffers.verticesBuffer);var a=n.getAttribLocation(e,this.options.vertexPosition);if(n.vertexAttribPointer(a,r,n.FLOAT,!1,0,0),n.enableVertexAttribArray(a),e._enableTextures){n.bindBuffer(n.ARRAY_BUFFER,e._buffers.texCoordBuffer);var i=n.getAttribLocation(e,this.options.vertexTextureCoord);n.vertexAttribPointer(i,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(i)}if(Object.entries(e._attribute).forEach(function(r){var a=o()(r,2),i=a[0],c=a[1],s=c.size,u=t[i]||{},d=!!u.normalize,f=u.type||"FLOAT",l=u.key||i;"UBYTE"===f&&(f="UNSIGNED_BYTE"),"USHORT"===f&&(f="UNSIGNED_SHORT"),c.type=f,l&&l!==i&&(e._attribute[l]=c),n.bindBuffer(n.ARRAY_BUFFER,e._buffers[i]);var v=n.getAttribLocation(e,i);n.vertexAttribPointer(v,s,n[f],d,0,0),n.enableVertexAttribArray(v)}),!e.meshData){var c=[[-1,-1,0,1].slice(0,r),[1,-1,0,1].slice(0,r),[1,1,0,1].slice(0,r),[-1,1,0,1].slice(0,r)];this.setMeshData({positions:c,cells:[[0,1,3],[3,1,2]]})}return e}},{key:"compileSync",value:function(e,t){e=e||R.a;var n={};function r(e){var t=[],o=(e=e.replace(/^\s*/gm,"")).match(/^#pragma\s+include\s+.*/gm);if(o){for(var a=0;a<o.length;a++){var i=o[a].match(/(?:<|")(.*)(?:>|")/);if(i){var c=0===i[0].indexOf("<")?"lib":"link",s=i[1];if("graph"===s&&(s="graphics"),n[s])t.push("/* included ".concat(s," */"));else if(n[s]=!0,"lib"===c){var u=r(B[s]);t.push(u)}else if("link"===c)throw new Error("Cannot load external links synchronously. Use compile instead of compileSync.")}}t.forEach(function(t){e=e.replace(/^#pragma\s+include\s+.*/m,t)})}return e}var o=r(e),a=t?r(t):null;return this.createProgram(o,a)}},{key:"compile",value:function(){var e=s()(i.a.mark(function e(t,n){var r,o,a,c,u,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=s()(i.a.mark(function e(t){var n,a,c,s,u,d,f,l,v;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t.replace(/^\s*/gm,""),n=[],!(a=t.match(/^#pragma\s+include\s+.*/gm))){e.next=36;break}c=0;case 5:if(!(c<a.length)){e.next=35;break}if(s=a[c],!(u=s.match(/(?:<|")(.*)(?:>|")/))){e.next=32;break}if(d=0===u[0].indexOf("<")?"lib":"link","graph"===(f=u[1])&&(f="graphics"),r[f]){e.next=31;break}if(r[f]=!0,"lib"!==d){e.next=21;break}return e.next=17,o(B[f]);case 17:l=e.sent,n.push(l),e.next=29;break;case 21:if("link"!==d){e.next=29;break}return e.next=24,N(f);case 24:return v=e.sent,e.next=27,o(v);case 27:v=e.sent,n.push(v);case 29:e.next=32;break;case 31:n.push("/* included ".concat(f," */"));case 32:c++,e.next=5;break;case 35:n.forEach(function(e){t=t.replace(/^#pragma\s+include\s+.*/m,e)});case 36:return e.abrupt("return",t);case 37:case"end":return e.stop()}},e)}))).apply(this,arguments)},o=function(e){return a.apply(this,arguments)},t=t||R.a,r={},e.next=6,o(t);case 6:if(c=e.sent,!n){e.next=13;break}return e.next=10,o(n);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=null;case 14:return u=e.t0,d=this.createProgram(c,u),e.abrupt("return",d);case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=s()(i.a.mark(function e(t){var n,r=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:null,e.next=3,N(t);case 3:if(t=e.sent,!n){e.next=8;break}return e.next=7,N(n);case 7:n=e.sent;case 8:return e.abrupt("return",this.compile(t,n));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createTexture",value:function(e){var t=this,n=this.gl;n.activeTexture(n.TEXTURE15);var r=n.createTexture();return n.bindTexture(n.TEXTURE_2D,r),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r._img=e,this.textures.push(r),r.delete=function(){t.deleteTexture(r)},r}},{key:"loadTexture",value:function(){var e=s()(i.a.mark(function e(t){var n,r,o,a,c=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},r=n.useImageBitmap,o=void 0===r||r,e.next=3,S(t,o);case 3:return a=e.sent,e.abrupt("return",this.createTexture(a));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearBuffer,t=void 0===e||e;this.startRender=!0;var n=this.gl,r=this.program;r||(r=this.createProgram(),this.useProgram(r)),t&&n.clear(n.COLOR_BUFFER_BIT);var o=this[C];this._draw(),this[C]===o&&(this[C]=null)}},{key:"update",value:function(){this.startRender&&null==this[C]&&(this[C]=requestAnimationFrame(this.render.bind(this)))}},{key:"isWebGL2",get:function(){return"undefined"!=typeof WebGL2RenderingContext&&this.gl instanceof WebGL2RenderingContext}},{key:"enableTextures",get:function(){return this.program&&this.program._enableTextures}},{key:"uniforms",get:function(){var e=this.program;if(!e||!e.uniforms)throw Error("No avaliable program.");return e.uniforms}}]),e}();w()(H,"defaultOptions",{preserveDrawingBuffer:!0,autoUpdate:!0,vertexPosition:"a_vertexPosition",vertexTextureCoord:"a_vertexTextureCoord",webgl2:!1}),w()(H,"UBYTE",H.UNSIGNED_BYTE),w()(H,"USHORT",H.UNSIGNED_SHORT),w()(H,"fetchShader",N);var Y=H,X=n(14),q=n.n(X),z=n(15),W=n.n(z),V=n(16),K=n.n(V),$=n(17),J=n.n($),Q=n(18),Z=n.n(Q),ee=n(19),te=n.n(ee),ne=n(20),re=n.n(ne),oe=n(21),ae=n.n(oe);n.d(t,"default",function(){return se}),Y.addLibs({stdlib:q.a,box:J.a,transform:Z.a,graphics:te.a,color:re.a,pattern:ae.a,shapes:W.a,shaper:K.a});var ie=Symbol("eventHandlers");function ce(e,t){var n=t.target.getBoundingClientRect(),r=n.left,o=n.top,a=t.changedTouches?t.changedTouches[0]:t,i=a.clientX,c=a.clientY;return[(i-r)/e.clientWidth,1-(c-o)/e.clientHeight]}var se=function(e){function t(){return d()(this,t),p()(this,b()(t).apply(this,arguments))}return x()(t,e),l()(t,[{key:"compile",value:function(){var e=s()(i.a.mark(function e(n,r){var o,a,c,s=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g()(b()(t.prototype),"compile",this).call(this,n,r);case 2:if(o=e.sent,a=o.shaderText.fragmentShader,!(c=a.match(/^#pragma\s+texture\s+.*/gm))){e.next=9;break}return e.next=8,Promise.all(c.map(function(e){var t=e.match(/^#pragma\s+texture\s+(.*)/);return s.loadTexture(t[1])}));case 8:this._preloadedTextures=e.sent;case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"setFeebackContext",value:function(){if(!this.options.preserveDrawingBuffer)throw new Error("Must set preserveDrawingBuffer to true while using feedback mode.");var e;this.feedbackContext||(e="function"==typeof OffscreenCanvas?new OffscreenCanvas(this.canvas.width,this.canvas.height):this.canvas.cloneNode(),this.feedbackContext=e.getContext("2d"))}},{key:"useProgram",value:function(e,n){var r=this,a=this.gl.canvas;this[ie]&&this[ie].forEach(function(e){var t=e.event,n=e.handler;"keydown"===t||"keyup"===t?document.removeEventListener(t,n):a.removeEventListener(t,n)}),delete this.startRenderTime,g()(b()(t.prototype),"useProgram",this).call(this,e,n),this[ie]=[],this._preloadedTextures&&(this._preloadedTextures.forEach(function(t,n){var r="dd_sampler".concat(n);r in e.uniforms&&(e.uniforms[r]=t)}),delete this._preloadedTextures);var i=this.uniforms;if("dd_frameIndex"in i&&(this.uniforms.dd_frameIndex=0),"dd_randseed0"in i&&(this.uniforms.dd_randseed0=[Math.random(),Math.random()]),"dd_randseed"in i&&(this.uniforms.dd_randseed=this.uniforms.dd_randseed0||[Math.random(),Math.random()]),"dd_resolution"in i&&(this.uniforms.dd_resolution=[a.width,a.height]),"dd_mouseEvent"in i){this.uniforms.dd_mouseEvent=0;var c=function(){r.uniforms.dd_mouseEvent=1},s=function(){r.uniforms.dd_mouseEvent=2},u=function(){r.uniforms.dd_mouseEvent=3};a.addEventListener("mousedown",c),a.addEventListener("mouseup",s),a.addEventListener("mousewheel",u),this[ie].push({event:"mousedown",mousedown:c},{event:"mouseup",mouseup:s},{event:"mousewheel",mousewheel:u})}if("dd_mousePosition"in i){this.uniforms.dd_mousePosition=[-1,-1];var d=function(e){var t=ce(a,e),n=o()(t,2),i=n[0],c=n[1];r.uniforms.dd_mousePosition=[i,c]},f=function(e){r.uniforms.dd_mousePosition=[-1,-1]};a.addEventListener("mousemove",d),a.addEventListener("mouseleave",f),this[ie].push({event:"mousemove",mousemove:d},{event:"mouseleave",mouseleave:f})}if("dd_mouseButtons"in i){this.uniforms.dd_mouseButtons=0;var l=function(e){r.uniforms.dd_mouseButtons=e.buttons},v=function(e){r.uniforms.dd_mouseButtons=e.buttons},p=function(e){r.uniforms.dd_mouseButtons=e.buttons},h=function(e){r.uniforms.dd_mouseButtons=0};a.addEventListener("mouseenter",l),a.addEventListener("mousedown",v),a.addEventListener("mouseup",p),a.addEventListener("mouseleave",h),this[ie].push({event:"mouseenter",mouseenter:l},{event:"mousedown",mousedown:v},{event:"mouseup",mouseup:p},{event:"mouseleave",mouseleave:h})}if("dd_keyEvent"in i){this.uniforms.dd_keyEvent=0;var m=function(e){r.uniforms.dd_keyEvent=1},_=function(e){r.uniforms.dd_keyEvent=2};document.addEventListener("keydown",m),document.addEventListener("keyup",_),this[ie].push({event:"keydown",keydown:m},{event:"keyup",keyup:_})}if("dd_keyCode"in i){this.uniforms.dd_keyCode=0;var x=function(e){r.uniforms.dd_keyCode=e.keyCode},y=function(e){r.uniforms.dd_keyCode=0};document.addEventListener("keydown",x),document.addEventListener("keyup",y),this[ie].push({event:"keydown",keydown:x},{event:"keyup",keyup:y})}if("dd_touchPosition"in i){this.uniforms.dd_touchPosition=[-1,-1];var w=function(e){var t=ce(a,e),n=o()(t,2),i=n[0],c=n[1];r.uniforms.dd_touchPosition=[i,c]},E=function(e){var t=ce(a,e),n=o()(t,2),i=n[0],c=n[1];r.uniforms.dd_touchPosition=[i,c]},D=function(e){r.uniforms.dd_touchPosition=[-1,-1]};a.addEventListener("touchstart",w),a.addEventListener("touchmove",E),a.addEventListener("touchend",D),this[ie].push({event:"touchstart",touchstart:w},{event:"touchmove",touchmove:E},{event:"touchend",touchend:D})}if("dd_touchEvent"in i){var F=function(e){r.uniforms.dd_touchEvent=1},A=function(e){r.uniforms.dd_touchEvent=3},k=function(e){r.uniforms.dd_touchEvent=2};a.addEventListener("touchstart",F),a.addEventListener("touchmove",A),a.addEventListener("touchend",k),this[ie].push({event:"touchstart",touchstart:F},{event:"touchmove",touchmove:A},{event:"touchend",touchend:k})}return"dd_samplerFeedback"in i&&this.setFeebackContext(),e}},{key:"render",value:function(){this.startRenderTime||(this.startRenderTime=Date.now());var e,n=(Date.now()-this.startRenderTime)/1e3,r=this.uniforms,o=this.gl;if("dd_time"in r&&(this.uniforms.dd_time=n),"dd_samplerFeedback"in r){var a=this.feedbackContext;a.canvas.width=o.canvas.width,a.canvas.height=o.canvas.height,a.drawImage(o.canvas,0,0),e=this.createTexture(a.canvas),r.dd_samplerFeedback=e}g()(b()(t.prototype),"render",this).call(this),e&&o.deleteTexture(e),"dd_time"in r&&this.update(),"dd_frameIndex"in r&&this.uniforms.dd_frameIndex++,"dd_randseed"in r&&(this.uniforms.dd_randseed=[Math.random(),Math.random()]),"dd_mouseEvent"in r&&(this.uniforms.dd_mouseEvent=0),"dd_keyEvent"in r&&(this.uniforms.dd_keyEvent=0),"dd_touchEvent"in r&&(this.uniforms.dd_touchEvent=0)}}],[{key:"autoLoad",value:function(){window.addEventListener("DOMContentLoaded",function(e){document.querySelectorAll("glsl-doodle").forEach(function(){var e=s()(i.a.mark(function e(n){var r,o,a,c,s,u,d,f,l,v;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=document.createElement("canvas")).width=n.getAttribute("width")||512,r.height=n.getAttribute("height")||512,o=n,n.attachShadow?o=n.attachShadow({mode:"open"}):n.createShadowRoot&&(o=n.createShadowRoot()),o.appendChild(r),a=new t(r),c=n.getAttribute("fragment-for")||n.getAttribute("for"),s=n.getAttribute("vertex-for"),u=null,d=null,!c){e.next=15;break}u=document.getElementById(c).textContent,e.next=20;break;case 15:return f=n.getAttribute("fragment-src")||n.getAttribute("src")||"./index.glsl",e.next=18,Y.fetchShader(f);case 18:u=e.sent,/\.js$/.test(f)&&new Function("shader",u)(function(e){u=e.join("")});case 20:if(!s){e.next=24;break}d=s.textContent,e.next=29;break;case 24:if(!(l=n.getAttribute("vert-src"))){e.next=29;break}return e.next=28,Y.fetchShader(l);case 28:d=e.sent;case 29:return e.next=31,a.compile(u,d);case 31:v=e.sent,a.useProgram(v),a.render();case 34:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())})}}]),t}(Y);w()(se,"defaultOptions",{preserveDrawingBuffer:!0})}]).default});